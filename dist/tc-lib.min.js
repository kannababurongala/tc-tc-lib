angular.module("tcLib",["camera","ngDialog","ui.bootstrap"]),angular.module("tcLib").directive("bindHtmlCompile",["$compile",function(o){return{restrict:"A",link:function(n,t,e){n.$watch(function(){return n.$eval(e.bindHtmlCompile)},function(e){t.html(e),o(t.contents())(n)})}}}]),angular.module("tcLib").directive("tcCamera",["ngDialog",function(a){return{restrict:"A",require:"ngModel",scope:{onCapture:"&",confirmText:"@"},link:function(n,e,t,o){angular.element(e).bind("click",function(){n.capturePhoto()}),n.autoClose=!n.confirmText,n.setModel=function(e){n.tempModel=e},n.setConfirmed=function(e){n.confirmed=e},n.capturePhoto=function(){a.open({template:"app/camera/camera-modal.html",className:"ngdialog-theme-default ngdialog-lg",controller:"cameraModelCtrl",scope:n}).closePromise.then(function(){"function"==typeof n.onCapture&&(n.confirmed&&o.$setViewValue(n.tempModel),n.onCapture({$snap:n.tempModel}))})}}}}]),angular.module("tcLib").controller("cameraModelCtrl",["$scope","ngDialog",function(n,e){n.onCamCapture=function(e){n.setModel(e),n.autoClose&&n.confirm()},n.confirm=function(){n.setConfirmed(!0)},n.cancel=function(){n.setConfirmed(!1)}}]),angular.module("tcLib").directive("clickAndDisable",[function(){return{restrict:"A",scope:{clickAndDisable:"&"},link:function(e,n,t){n.bind("click",function(){e.clickAndDisable=e.clickAndDisable||$timeout(angular.noop,5e3),n.prop("disabled",!0),e.clickAndDisable().finally(function(){n.prop("disabled",!1)})})}}}]),angular.module("tcLib").directive("tcDatePicker",["$parse",function(i){return{restrict:"E",scope:{name:"@",options:"=?",placeholder:"@",model:"=ngModel"},templateUrl:"app/date-picker/date-picker.html",link:function(a,e,n){function t(e){var n=e.date;if("day"===e.mode)for(var t=new Date(n).setHours(0,0,0,0),o=0;o<(i("events.length")(a)||0);o++){if(t===new Date($scope.events[o].date).setHours(0,0,0,0))return $scope.events[o].status}return""}a.calendarPanel={opened:!1},a.openCalendar=function(){a.calendarPanel.opened=!0},a.$watch("options",function(e,n){a.dateOptions={formatYear:"yy",showWeeks:!1,customClass:t,minDate:i("options.minDate")(a)||null,maxDate:i("options.maxDate")(a)||new Date(2040,12,31),startingDay:1}})}}}]),angular.module("tcLib").directive("tcFileInput",[function(){return{restrict:"AE",require:"ngModel",scope:{ngModel:"="},link:function(e,t,o,a){t.on("change",function(e){var n=t[0].files;a.$setViewValue(null),o.multiple?a.$setViewValue(n.length?n:null):a.$setViewValue(n[0])})}}}]),angular.module("tcLib").run(["$templateCache",function(e){e.put("app/camera/camera-modal.html",'<div class="camera-wrapper row"><ng-camera capture-message="Done!" class="grid-md-5" countdown="3" output-height="240" output-width="320" viewer-height="315" viewer-width="420" image-format="jpeg" jpeg-quality="100" action-message="Take picture" snapshot="model" overlay-url="./assets/images/overlay.png" shutter-url="./assets/sounds/camera-click.mp3" on-capture="onCamCapture($snap)"></ng-camera><div class="preview-wrapper grid-md-5" ng-if="model"><img ng-src="{{model}}" alt="Click capture to see preview"><div class="grid-md-4 ngdialog-buttons"><button class="btn btn-md btn-green" ng-if="confirmText && model" ng-click="confirm();closeThisDialog(0)">{{confirmText}}</button> <button class="btn btn-md btn-grey" ng-if="confirmText" ng-click="cancel();closeThisDialog(0);">Cancel</button></div></div></div>'),e.put("app/date-picker/date-picker.html",'<input placeholder="{{placeholder}}" class="form-field grid-md-12" ng-attr-name="{{name}}" ng-model="model" uib-datepicker-popup is-open="calendarPanel.opened" datepicker-options="dateOptions" ng-required="{{required}}" close-text="Close"> <span class="form-field-icon"><button type="button" class="btn btn-sm btn-sky-blue" ng-click="openCalendar()"><i class="fa fa-calendar"></i></button></span>')}]),angular.module("tcLib").directive("whenScrolled",function(){return{restrict:"A",scope:{scrollerApi:"=?",whenScrolled:"&"},link:function(e,n,t){var o=0;raw=n[0],n.bind("scroll",function(){o<raw.scrollTop&&raw.scrollTop+raw.offsetHeight>=raw.scrollHeight&&(e.whenScrolled(),o=raw.scrollTop)}),e.scrollerApi={resetScroll:function(){o=0,raw.scrollTop=0}}}}});