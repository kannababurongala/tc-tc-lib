angular.module("tcLib",["camera","ngDialog","ui.bootstrap"]),angular.module("tcLib").directive("bindHtmlCompile",["$compile",function(a){return{restrict:"A",link:function(b,c,d){b.$watch(function(){return b.$eval(d.bindHtmlCompile)},function(d){c.html(d),a(c.contents())(b)})}}}]),angular.module("tcLib").run(["$templateCache",function(a){a.put("capturPhotoTemplate.html",'<div class="camera-wrapper row"><ng-camera capture-message="Done!" class="grid-md-5"countdown="3"output-height="240"output-width="320"viewer-height="315"viewer-width="420"image-format="jpeg"jpeg-quality="100"action-message="Take picture"snapshot="model"overlay-url="./assets/images/overlay.png"shutter-url="./assets/sounds/camera-click.mp3"on-capture="onCamCapture($snap)"></ng-camera><div class="preview-wrapper grid-md-5" ng-if="model"><img ng-src="{{model}}" alt="Click capture to see preview"/><div class="grid-md-4 ngdialog-buttons"><button class="btn btn-md btn-green" ng-if="confirmText && model" ng-click="confirm();closeThisDialog(0)">{{confirmText}}</button><button class="btn btn-md btn-grey" ng-if="confirmText" ng-click="cancel();closeThisDialog(0);">Cancel</button></div></div>'),a.put("dateInputTemplate.html",'{{showWeeks}}<input type="text" placeholder="{{placeholder}}" class="form-field grid-md-12" ng-attr-name="{{name}}"uib-datepicker-popup ng-model="model"is-open="calendarPanel.opened" datepicker-options="dateOptions"ng-required="true" close-text="Close" /><span class="form-field-icon"><button type="button" class="btn btn-sm btn-sky-blue"ng-click="openCalendar()"><i class="fa fa-calendar"></i></button></span>')}]),angular.module("tcLib").directive("tcCamera",["ngDialog",function(a){return{restrict:"E",scope:{model:"=ngModel",onCapture:"&",confirmText:"@"},template:'<button class="btn btn-info"ng-click="capturePhoto()">Photo</button>',link:function(b,c,d){b.autoClose=!b.confirmText,b.setModel=function(a){b.tempModel=a},b.setConfirmed=function(a){b.confirmed=a},b.capturePhoto=function(){a.open({template:"capturPhotoTemplate.html",className:"ngdialog-theme-default ngdialog-lg",controller:"cameraModelCtrl",scope:b}).closePromise.then(function(){"function"==typeof b.onCapture&&(b.confirmed&&(b.model=b.tempModel),b.onCapture({$snap:b.tempModel}))})}}}}]),angular.module("tcLib").controller("cameraModelCtrl",["$scope","ngDialog",function(a,b){a.onCamCapture=function(b){a.setModel(b),a.autoClose&&a.confirm()},a.confirm=function(){a.setConfirmed(!0)},a.cancel=function(){a.setConfirmed(!1)}}]),angular.module("tcLib").directive("clickAndDisable",[function(){return{restrict:"A",scope:{clickAndDisable:"&"},link:function(a,b,c){b.bind("click",function(){a.clickAndDisable=a.clickAndDisable||$timeout(angular.noop,5e3),b.prop("disabled",!0),a.clickAndDisable()["finally"](function(){b.prop("disabled",!1)})})}}}]),angular.module("tcLib").directive("tcDatePicker",["$parse",function(a){return{restrict:"E",scope:{name:"@",options:"=?",placeholder:"@",model:"=ngModel"},templateUrl:"dateInputTemplate.html",link:function(b,c,d){function e(){b.dateOptions={formatYear:"yy",showWeeks:!1,customClass:f,minDate:a("options.minDate")(b)||null,maxDate:a("options.maxDate")(b)||new Date(2040,12,31),startingDay:1}}function f(c){var d=c.date,e=c.mode;if("day"===e)for(var f=new Date(d).setHours(0,0,0,0),g=0;g<(a("events.length")(b)||0);g++){var h=new Date($scope.events[g].date).setHours(0,0,0,0);if(f===h)return $scope.events[g].status}return""}b.calendarPanel={opened:!1},b.openCalendar=function(){b.calendarPanel.opened=!0},b.$watch("options",function(a,b){e()})}}}]),angular.module("tcLib").directive("tcFileInput",[function(){return{restrict:"AE",require:"ngModel",scope:{ngModel:"="},link:function(a,b,c,d){b.on("change",function(a){var e=b[0].files;c.multiple?d.$setViewValue(e):d.$setViewValue(e[0])})}}}]),angular.module("tcLib").directive("whenScrolled",function(){return{restrict:"A",scope:{scrollerApi:"=?",whenScrolled:"&"},link:function(a,b,c){function d(){function a(){e=0,raw.scrollTop=0}return{resetScroll:a}}var e=0;raw=b[0],b.bind("scroll",function(){e<raw.scrollTop&&raw.scrollTop+raw.offsetHeight>=raw.scrollHeight&&(a.whenScrolled(),e=raw.scrollTop)}),a.scrollerApi=d()}}});