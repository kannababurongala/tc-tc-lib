angular.module("tcLib",["camera","ngDialog","ui.bootstrap"]),angular.module("tcLib").directive("bindHtmlCompile",["$compile",function(o){return{restrict:"A",link:function(t,n,e){t.$watch(function(){return t.$eval(e.bindHtmlCompile)},function(e){n.html(e),o(n.contents())(t)})}}}]),angular.module("tcLib").directive("tcCamera",["ngDialog",function(i){return{restrict:"A",require:"ngModel",scope:{onCapture:"&",confirmText:"@"},link:function(t,e,n,o){angular.element(e).bind("click",function(){t.capturePhoto()}),t.autoClose=!t.confirmText,t.setModel=function(e){t.tempModel=e},t.setConfirmed=function(e){t.confirmed=e},t.capturePhoto=function(){i.open({template:"app/camera/camera-modal.html",className:"ngdialog-theme-default ngdialog-lg",controller:"cameraModelCtrl",scope:t}).closePromise.then(function(){"function"==typeof t.onCapture&&(t.confirmed&&o.$setViewValue(t.tempModel),t.onCapture({$snap:t.tempModel}))})}}}}]),angular.module("tcLib").controller("cameraModelCtrl",["$scope","ngDialog",function(t,e){t.onCamCapture=function(e){t.setModel(e),t.autoClose&&t.confirm()},t.confirm=function(){t.setConfirmed(!0)},t.cancel=function(){t.setConfirmed(!1)}}]),angular.module("tcLib").directive("clickAndDisable",[function(){return{restrict:"A",scope:{clickAndDisable:"&"},link:function(e,t,n){t.bind("click",function(){e.clickAndDisable=e.clickAndDisable||$timeout(angular.noop,5e3),t.prop("disabled",!0),e.clickAndDisable().finally(function(){t.prop("disabled",!1)})})}}}]),angular.module("tcLib").directive("tcDatePicker",["$parse",function(r){return{restrict:"E",scope:{name:"@",options:"=?",placeholder:"@",model:"=ngModel"},templateUrl:"app/date-picker/date-picker.html",link:function(i,e,t){function n(e){var t=e.date;if("day"===e.mode)for(var n=new Date(t).setHours(0,0,0,0),o=0;o<(r("events.length")(i)||0);o++){if(n===new Date($scope.events[o].date).setHours(0,0,0,0))return $scope.events[o].status}return""}i.calendarPanel={opened:!1},i.openCalendar=function(){i.calendarPanel.opened=!0},i.$watch("options",function(e,t){i.dateOptions={formatYear:"yy",showWeeks:!1,customClass:n,minDate:r("options.minDate")(i)||null,maxDate:r("options.maxDate")(i)||new Date(2040,12,31),startingDay:1}})}}}]),angular.module("tcLib").directive("tcFileInput",[function(){return{restrict:"AE",require:"ngModel",scope:{ngModel:"="},link:function(e,n,o,i){n.on("change",function(e){var t=n[0].files;i.$setViewValue(null),o.multiple?i.$setViewValue(t.length?t:null):i.$setViewValue(t[0])})}}}]),angular.module("tcLib").provider("httpService",function(){var c="";try{c=location.href.split("/")[3]}catch(e){c=""}this.setBasePath=function(e){c=e},this.$get=["$http","$q",function(n,o){return{get:i.bind(null,"GET"),del:i.bind(null,"DELETE"),put:e.bind(null,"PUT"),post:e.bind(null,"POST"),upload:function(e,t,n,o,i){return a({url:t=r(t,o,i),method:e,data:n,transformRequest:angular.identity,headers:{"Content-Type":void 0}})}.bind(null,"POST"),getJSON:function(e,t,n){return n&&localStorage.getItem(n)?o.when(null).then(function(){var e=localStorage.getItem(n);return JSON.parse(e)}):i(e,t).then(function(e){return localStorage.setItem(n,e.json),e})}.bind(null,"GET")};function i(e,t,n,o){return a({method:e,url:t=r(t,n,o)})}function e(e,t,n,o,i){return a({method:e,url:t=r(t,o,i),data:n})}function r(e,t,n){return t&&(e+="?"+toURLParams(t,n)),"/"+c+"/"+e}function a(e){var t=o.defer();return n(e).success(function(e){e.isSuccess?t.resolve(e.response):t.reject(e)}).error(function(e){t.reject(e)}),t.promise}}]}),angular.module("tcLib").service("tcOPService",["httpService",function(t){this.create=function(e){return t.post("op/create",e)},this.search=function(e){return t.post("op/op-list",e)},this.get=function(e){return t.get("op/get/"+e)},this.statusList=function(e){return t.get("op/op-status-list",{date:e})},this.configCreate=function(e){return t.post("op/config/create",e)},this.configList=function(){return t.get("op/config/list")},this.login=function(e){return t.post("auth/login",e)}}]),angular.module("tcLib").run(["$templateCache",function(e){e.put("src/camera/camera-modal.html",'<div class="camera-wrapper row"><ng-camera capture-message="Done!" class="grid-md-5" countdown="3" output-height="240" output-width="320" viewer-height="315" viewer-width="420" image-format="jpeg" jpeg-quality="100" action-message="Take picture" snapshot="model" overlay-url="./assets/images/overlay.png" shutter-url="./assets/sounds/camera-click.mp3" on-capture="onCamCapture($snap)"></ng-camera><div class="preview-wrapper grid-md-5" ng-if="model"><img ng-src="{{model}}" alt="Click capture to see preview"><div class="grid-md-4 ngdialog-buttons"><button class="btn btn-md btn-green" ng-if="confirmText && model" ng-click="confirm();closeThisDialog(0)">{{confirmText}}</button> <button class="btn btn-md btn-grey" ng-if="confirmText" ng-click="cancel();closeThisDialog(0);">Cancel</button></div></div></div>'),e.put("src/date-picker/date-picker.html",'<input placeholder="{{placeholder}}" class="form-field grid-md-12" ng-attr-name="{{name}}" ng-model="model" uib-datepicker-popup is-open="calendarPanel.opened" datepicker-options="dateOptions" ng-required="{{required}}" close-text="Close"> <span class="form-field-icon"><button type="button" class="btn btn-sm btn-sky-blue" ng-click="openCalendar()"><i class="fa fa-calendar"></i></button></span>')}]),angular.module("tcLib").directive("whenScrolled",function(){return{restrict:"A",scope:{scrollerApi:"=?",whenScrolled:"&"},link:function(e,t,n){var o=0;raw=t[0],t.bind("scroll",function(){o<raw.scrollTop&&raw.scrollTop+raw.offsetHeight>=raw.scrollHeight&&(e.whenScrolled(),o=raw.scrollTop)}),e.scrollerApi={resetScroll:function(){o=0,raw.scrollTop=0}}}}});