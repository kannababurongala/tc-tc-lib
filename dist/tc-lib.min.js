angular.module("tcLib",["camera","ngDialog","ui.bootstrap"]),angular.module("tcLib").directive("bindHtmlCompile",["$compile",function(i){return{restrict:"A",link:function(e,n,t){e.$watch(function(){return e.$eval(t.bindHtmlCompile)},function(t){n.html(t),i(n.contents())(e)})}}}]),angular.module("tcLib").directive("tcCamera",["ngDialog",function(r){return{restrict:"A",require:"ngModel",scope:{onCapture:"&",confirmText:"@"},link:function(e,t,n,i){angular.element(t).bind("click",function(){e.capturePhoto()}),e.autoClose=!e.confirmText,e.setModel=function(t){e.tempModel=t},e.setConfirmed=function(t){e.confirmed=t},e.capturePhoto=function(){r.open({template:"app/camera/camera-modal.html",className:"ngdialog-theme-default ngdialog-lg",controller:"cameraModelCtrl",scope:e}).closePromise.then(function(){"function"==typeof e.onCapture&&(e.confirmed&&i.$setViewValue(e.tempModel),e.onCapture({$snap:e.tempModel}))})}}}}]),angular.module("tcLib").controller("cameraModelCtrl",["$scope","ngDialog",function(e,t){e.onCamCapture=function(t){e.setModel(t),e.autoClose&&e.confirm()},e.confirm=function(){e.setConfirmed(!0)},e.cancel=function(){e.setConfirmed(!1)}}]),angular.module("tcLib").directive("clickAndDisable",[function(){return{restrict:"A",scope:{clickAndDisable:"&"},link:function(t,e,n){e.bind("click",function(){t.clickAndDisable=t.clickAndDisable||$timeout(angular.noop,5e3),e.prop("disabled",!0),t.clickAndDisable().finally(function(){e.prop("disabled",!1)})})}}}]),angular.module("tcLib").directive("tcDatePicker",["$parse",function(s){return{restrict:"E",scope:{name:"@",options:"=?",placeholder:"@",model:"=ngModel"},templateUrl:"src/date-picker/date-picker.html",link:function(r,t,e){function n(t){var e=t.date;if("day"===t.mode)for(var n=new Date(e).setHours(0,0,0,0),i=0;i<(s("events.length")(r)||0);i++){if(n===new Date($scope.events[i].date).setHours(0,0,0,0))return $scope.events[i].status}return""}r.calendarPanel={opened:!1},r.openCalendar=function(){r.calendarPanel.opened=!0},r.$watch("options",function(t,e){r.dateOptions={formatYear:"yy",showWeeks:!1,customClass:n,minDate:s("options.minDate")(r)||null,maxDate:s("options.maxDate")(r)||new Date(2040,12,31),startingDay:1}})}}}]),angular.module("tcLib").directive("tcFileInput",[function(){return{restrict:"AE",require:"ngModel",scope:{ngModel:"="},link:function(t,n,i,r){n.on("change",function(t){var e=n[0].files;r.$setViewValue(null),i.multiple?r.$setViewValue(e.length?e:null):r.$setViewValue(e[0])})}}}]),angular.module("tcLib").service("casesheet",["httpService",function(e){this.save=function(t){return e.post("casesheet/saveorupdate",t)},this.caseSheetList=function(t){return e.get("casesheet/search",{opPatientId:t})}}]),angular.module("tcLib").service("commonService",["httpService",function(e){this.createDoctor=function(t){return e.post("common/doctor/create",t)},this.getDoctors=function(){return e.get("common/doctor/list")},this.getDoctorByUserId=function(t){return e.get("common/doctor/user/"+t)},this.getOpTypes=function(){return e.get("common/optype/list")},this.getOpSubTypes=function(){return e.get("common/opsubtype/list")},this.getLabData=function(){return e.get("common/lab/lab-data")},this.getLabReportData=function(){return e.get("common/lab/lab-report-data")},this.getLabTestNotes=function(){return e.get("common/lab/lab-test-notes")},this.getRequisitionSlip=function(){return e.get("common/lab/requisition-slip")}}]),angular.module("tcLib").service("companyService",["httpService",function(e){this.save=function(t){return e.post("company/saveorupdate",t)},this.companiesList=function(){return e.get("company/list")}}]),angular.module("tcLib").service("complaintService",["httpService",function(e){this.saveComplaint=function(t){return e.post("complaint/save",t)},this.saveComplaintTransation=function(t){return e.post("complaint/transact/saveorupdate",t)},this.complaintMastersList=function(t){return e.get("complaint/search",{patientId:t})},this.complaintTransactList=function(t){return e.get("complaint/transact/search",{opPatientId:t})}}]),angular.module("tcLib").service("drugFormulae",["httpService",function(e){this.save=function(t){return e.post("drugFormulae/saveorupdate",t)},this.drugFormulaeList=function(){return e.get("drugFormulae/list")}}]),angular.module("tcLib").provider("httpService",function(){var a="";try{a=location.href.split("/")[3]}catch(t){a=""}this.setBasePath=function(t){a=t},this.$get=["$http","$q",function(n,i){return{get:r.bind(null,"GET"),del:r.bind(null,"DELETE"),put:t.bind(null,"PUT"),post:t.bind(null,"POST"),upload:function(t,e,n,i,r){return o({url:e=s(e,i,r),method:t,data:n,transformRequest:angular.identity,headers:{"Content-Type":void 0}})}.bind(null,"POST"),getJSON:function(t,e,n){return n&&localStorage.getItem(n)?i.when(null).then(function(){var t=localStorage.getItem(n);return JSON.parse(t)}):r(t,e).then(function(t){return localStorage.setItem(n,t.json),t})}.bind(null,"GET")};function r(t,e,n,i){return o({method:t,url:e=s(e,n,i)})}function t(t,e,n,i,r){return o({method:t,url:e=s(e,i,r),data:n})}function s(t,e,n){return e&&(t+="?"+toURLParams(e,n)),"/"+a+"/"+t}function o(t){var e=i.defer();return n(t).success(function(t){t.isSuccess?e.resolve(t.response):e.reject(t)}).error(function(t){e.reject(t)}),e.promise}}]}),angular.module("tcLib").service("labPatientService",["httpService",function(n){this.save=function(t){return n.post("labpatient/save",t)},this.search=function(t){return n.get("labpatient/get",t)},this.saveReport=function(t){return n.post("labpatient/report/save",t)},this.getReport=function(t){return n.get("report/get/"+t)},this.savePayment=function(t){return n.post("payment/save",t)},this.getPayments=function(t){return n.get("get/payments/"+t)},this.uploadReport=function(t,e){return n.upload("uploadreport/"+t,e)}}]),angular.module("tcLib").service("locationService",["httpService",function(e){this.save=function(t){return e.post("location/saveorupdate",t)},this.locationsList=function(){return e.get("location/list")}}]),angular.module("tcLib").service("loginService",["httpService",function(e){this.login=function(t){return e.post("auth/login",t)},this.sessionUser=function(){return e.get("auth/sessionuser")}}]),angular.module("tcLib").service("medicineCategoryService",["httpService",function(e){this.save=function(t){return e.post("medicinecategory/saveorupdate",t)},this.medicineCategoryList=function(){return e.get("medicinecategory/list")}}]),angular.module("tcLib").service("medicineCategoryByDoctorService",["httpService",function(e){this.save=function(t){return e.post("medicinecategorybydoctor/saveorupdate",t)},this.medicineCategoryByDoctorList=function(){return e.get("medicinecategorybydoctor/list")}}]),angular.module("tcLib").service("medicineService",["httpService",function(e){this.save=function(t){return e.post("medicine/saveorupdate",t)},this.medicinesList=function(t){return e.get("medicine/list",{id:t})},this.medicineViewList=function(t){return e.get("medicine/listbyoptions",t)}}]),angular.module("tcLib").service("opPatientService",["httpService",function(e){this.save=function(t){return e.post("oppatient/createorupdate",t)},this.getOpPatientsListByOptions=function(t){return e.post("oppatient/listbyoptions",t)},this.getOpPatientByPatientId=function(t){return e.get("oppatient/getoppatientbyid/"+t)},this.getOpPatientCountWithStatusByOpId=function(t){return e.get("oppatient/statuscount/"+t)},this.getOrCreatePatientCard=function(t){return e.post("oppatient/patient-card",t)},this.createPatientCard=function(t){return e.post("oppatient/patient-card/new",t)}}]),angular.module("tcLib").service("opPrescriptionService",["httpService",function(e){this.save=function(t){return e.post("opprescription/saveorupdate",t)},this.searchPurchaseMedicines=function(t){return e.get("opprescription/medicine-search",t)},this.opPrescriptionList=function(t){return e.get("opprescription/list",t)}}]),angular.module("tcLib").service("opService",["httpService",function(e){this.create=function(t){return e.post("op/create",t)},this.search=function(t){return e.post("op/op-list",t)},this.get=function(t){return e.get("op/get/"+t)},this.statusList=function(t){return e.get("op/op-status-list",{date:t})},this.configCreate=function(t){return e.post("op/config/create",t)},this.configList=function(){return e.get("op/config/list")}}]),angular.module("tcLib").service("patientService",["httpService",function(e){this.save=function(t){return e.post("patient/saveorupdate",t)},this.patientsListByOptions=function(t){return e.get("patient/listbyoptions",t)},this.imageData=function(t){return e.get("patient/getphoto",t)}}]),angular.module("tcLib").service("purchasebillMedicineService",["httpService",function(e){this.purchaseBillMedicines=function(t){return e.get("purchasebillmedicine/search",t)},this.alertInfo=function(t){return e.get("purchasebillmedicine/alertinfo",t)},this.pendingBillMedicines=function(t){return e.get("purchasebillmedicine/pendingbills",{billId:t})}}]),angular.module("tcLib").service("purchasebillService",["httpService",function(n){this.createPurchaseBill=function(t){return n.post("purchasebill/save",t)},this.purchaseBillById=function(t){return n.get("purchasebill/get/"+t)},this.purchaseBillsListByOptions=function(t){return n.get("purchasebill/search",t)},this.purchaseTotal=function(t){return n.get("purchasebill/total",t)},this.createPurchaseBillPayment=function(t){return n.post("purchasebill/payment/save",t)},this.purchaseBillPaymentList=function(t){return n.get("purchasebill/payment/search",t)},this.createPurchaseBillReturn=function(t){return n.post("purchasebill/return/save",t)},this.purchaseReturns=function(t){return n.get("purchasebill/returns/get",t)},this.purchaseReturnMedicines=function(t){return n.get("purchasebill/return/medicines/get",t)},this.uploadPurchaseBill=function(t,e){return n.post("purchasebill/upload/"+e,t)}}]),angular.module("tcLib").service("reportsService",["httpService",function(e){this.salesReports=function(t){return e.get("reports/sales/bills",t)},this.salesReturnReports=function(t){return e.get("reports/sales/returns",t)},this.salesPaymentReports=function(t){return e.get("reports/sales/payments",t)},this.paymentReports=function(t){return e.post("reports/payments",t)},this.purchaseReports=function(t){return e.get("reports/purchase",t)},this.salesTransactions=function(t){return e.get("reports/salesPayments",t)},this.purchaseTransactions=function(t){return e.get("reports/purchaseTransactions",t)},this.paymentTransactionsByDateRange=function(t){return e.post("reports/create",t)},this.adjustMrpByDateRange=function(t){return e.post("reports/adjustMrp",t)},this.adjustUnitsOrAvailability=function(t){return e.post("reports/adjustunitsoravailability",t)}}]),angular.module("tcLib").service("representativeService",["httpService",function(e){this.save=function(t){return e.post("representative/saveorupdate",t)},this.representativesList=function(){return e.get("representative/list")}}]),angular.module("tcLib").service("salesbillService",["httpService",function(i){this.create=function(t){return i.post("salesbill/save",t)},this.salesBillsListByOptions=function(t){return i.get("salesbill/list",t)},this.salesAmount=function(t){return i.get("salesbill/total",t)},this.medicineSearch=function(t){return i.get("salesbill/medicines/search",t)},this.createSalesBillPayment=function(t){return i.post("salesbill/payment/save",t)},this.paymentsList=function(t){return i.get("salesbill/payment/search",{billId:t})},this.createSalesBillReturn=function(t){return i.post("salesbill/return/save",t)},this.returnsList=function(t){return i.get("salesbill/return/search",t)},this.prescriptionsList=function(t){return i.get("salesbill/prescription/search",t)},this.savePrescriptionSale=function(t,e,n){return i.post("salesbill/prescription/save/"+e+"?isResale="+(n||!1),t)},this.createPrescriptionSale=function(t){return i.post("salesbill/prescription/add",t)},this.salesReturnTotal=function(t){return i.get("salesbill/returns/total",t)},this.generateInvoiceNum=function(){return i.get("salesbill/generateinvoicenum")}}]),angular.module("tcLib").service("supplierService",["httpService",function(e){this.save=function(t){return e.post("supplier/saveorupdate",t)},this.suppliersList=function(){return e.get("supplier/list")}}]),angular.module("tcLib").run(["$templateCache",function(t){t.put("src/camera/camera-modal.html",'<div class="camera-wrapper row"><ng-camera capture-message="Done!" class="grid-md-5" countdown="3" output-height="240" output-width="320" viewer-height="315" viewer-width="420" image-format="jpeg" jpeg-quality="100" action-message="Take picture" snapshot="model" overlay-url="./assets/images/overlay.png" shutter-url="./assets/sounds/camera-click.mp3" on-capture="onCamCapture($snap)"></ng-camera><div class="preview-wrapper grid-md-5" ng-if="model"><img ng-src="{{model}}" alt="Click capture to see preview"><div class="grid-md-4 ngdialog-buttons"><button class="btn btn-md btn-green" ng-if="confirmText && model" ng-click="confirm();closeThisDialog(0)">{{confirmText}}</button> <button class="btn btn-md btn-grey" ng-if="confirmText" ng-click="cancel();closeThisDialog(0);">Cancel</button></div></div></div>'),t.put("src/date-picker/date-picker.html",'<input placeholder="{{placeholder}}" class="form-field grid-md-12" ng-attr-name="{{name}}" ng-model="model" uib-datepicker-popup is-open="calendarPanel.opened" datepicker-options="dateOptions" ng-required="{{required}}" close-text="Close"> <span class="form-field-icon"><button type="button" class="btn btn-sm btn-sky-blue" ng-click="openCalendar()"><i class="fa fa-calendar"></i></button></span>')}]),angular.module("tcLib").directive("whenScrolled",function(){return{restrict:"A",scope:{scrollerApi:"=?",whenScrolled:"&"},link:function(t,e,n){var i=0;raw=e[0],e.bind("scroll",function(){i<raw.scrollTop&&raw.scrollTop+raw.offsetHeight>=raw.scrollHeight&&(t.whenScrolled(),i=raw.scrollTop)}),t.scrollerApi={resetScroll:function(){i=0,raw.scrollTop=0}}}}});